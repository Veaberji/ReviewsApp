<head>
    <link href="~/lib/dropzone/min/dropzone.min.css" rel="Stylesheet" type="text/css" />
</head>

<script language="javascript">
    Dropzone.options.imagesDropzone = {
    init: function() {
            this.on("successmultiple", function(file, responseText) {
                $('#ImagesUrls').val(responseText);
            });

            let imagesDropzone = this;
            $('#clear-dropzone')
                .on("click", function () {
                    imagesDropzone.removeAllFiles();
                    if ($('#ImagesUrls').val()) {
                       deleteUploadedFiles();
                    }
                });
        },
        accept(file, done) {
            return done();
        },
        acceptedFiles: "image/*",
        autoDiscover: false,
        uploadMultiple: true,
        parallelUploads: 10,
        maxFiles: 10,
        maxFilesize: 2
    };

    function deleteUploadedFiles() {
        $.ajax({
            url: '/Review/DeleteImages',
            headers: { "RequestVerificationToken":
                $('input[name="__RequestVerificationToken"]').val() },
            data: { "urls": $('#ImagesUrls').val() },
            type: "POST",
            success: function () {
                $('#ImagesUrls').val("");
            },
            error: function (errorResponse) {
                console.log(errorResponse.responseText);
            },
            failure: function (failureResponse) {
                console.log(failureResponse.responseText);
            }
        });
    }
</script>